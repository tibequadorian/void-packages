# Template file for 'musescore'
pkgname=musescore
version=4.0.0
revision=1
_commit=ca5b8a1d78cc06ae038c79c58162e435867e18ba
wrksrc="MuseScore-${_commit}"
build_style=cmake
configure_args="-DUSE_SYSTEM_FREETYPE=ON -DBUILD_JACK=$(vopt_if jack ON OFF)
 -DBUILD_WEBENGINE=OFF -DDOWNLOAD_SOUNDFONT=OFF
 -DMUSESCORE_BUILD_CONFIG=release"
hostmakedepends="pkg-config qt5-qmake qt5-host-tools qt5-tools"
makedepends="$(vopt_if jack jack-devel) libsndfile-devel
 qt5-declarative-devel qt5-quickcontrols2-devel
 qt5-xmlpatterns-devel qt5-svg-devel qt5-tools-devel"
#makedepends="jack-devel lame-devel libsndfile-devel portaudio-devel
# portmidi-devel pulseaudio-devel qt5-declarative-devel qt5-script-devel
# qt5-svg-devel qt5-tools-devel qt5-webchannel-devel
# qt5-location-devel qt5-xmlpatterns-devel qt5-plugin-mysql qt5-plugin-odbc
# qt5-plugin-pgsql qt5-plugin-sqlite qt5-plugin-tds qt5-quickcontrols2-devel"
depends="qt5-plugin-sqlite qt5-graphicaleffects qt5-quickcontrols2"
short_desc="Create, play and print beautiful sheet music"
maintainer="tibequadorian <tibequadorian@posteo.de>"
license="GPL-2.0-or-later"
homepage="https://musescore.org/"
_soundfont_url="https://ftp.osuosl.org/pub/musescore/soundfont/MuseScore_General"
distfiles="https://github.com/musescore/MuseScore/archive/${_commit}.tar.gz
 ${_soundfont_url}/MuseScore_General.sf3
 ${_soundfont_url}/MuseScore_General_License.md"
checksum="e290ea9e4ea2c0e267441d3f98df39a48ee0d24b9ed80ca22d98b250563e317d
 5b85b6c2c61d10b2b91cddd41efcce7b25cd31c8271d511c73afafbef20b6fa3
 5ad8d737e13c7f01f5b9674872a82a92b4ba253603e8ed14b9db12293550b4b9"
skip_extraction="MuseScore_General.sf3 MuseScore_General_License.md"

build_options="jack"
build_options_default="jack"

post_extract() {
	cp "${XBPS_SRCDISTDIR}/${pkgname}-${version}/MuseScore_General.sf3" "${wrksrc}/share/sound/"
	cp "${XBPS_SRCDISTDIR}/${pkgname}-${version}/MuseScore_General_License.md" "${wrksrc}/share/sound/"
}
